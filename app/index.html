<!DOCTYPE HTML>
<html>
<head>
  <meta charset="UTF-8">
  <title>Main</title>
  <link rel="stylesheet" href="whatever-you-want.css">
  <script src="main.js"></script>
</head>

<body>
  <div id="elm"></div>
  <script>
  function localizeDate(lang, year, month)
  {
    const dateTimeFormat = new Intl.DateTimeFormat(lang, {
      weekday: 'long',
      year: 'numeric',
      month: 'long',
      day: 'numeric'
    });
    return dateTimeFormat.format(new Date(year, month));
  }
  customElements.define('intl-date',
    class extends HTMLElement {
      constructor() { super(); }
      connectedCallback() { this.setTextContent(); }
      attributeChangedCallback() { this.setTextContent(); }
      static get observedAttributes() { return ['lang', 'year', 'month']; }
      
      setTextContent()
      {
        const lang = this.getAttribute('lang');
        const year = this.getAttribute('year');
        const month = this.getAttribute('month');
        this.textContent = localizeDate(lang, year, month);
      }
    }
  );

  var app = Elm.Main.init({
    node: document.getElementById('elm'),
    flags : Date.now()
  });
  app.ports.cache.subscribe(function(data) {
    localStorage.setItem('cache', JSON.stringify(data));
  });

  setInterval(function () { 
    app.ports.interval.send(Date.now());
  }, 5000);
  </script>
</body>
</html>
